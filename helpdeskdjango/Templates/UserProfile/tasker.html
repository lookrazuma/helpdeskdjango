<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<br>
<div class="container">
        <div class="row">
            <form class="d-flex col-sm " action="">
                <input class="form-control me-2 col-sm " type="search" placeholder="Введите для поиска" aria-label="Search" name="Search">
                <button class="btn btn-outline-success" type="submit">Найти</button>
            </form>
        </div>
        <br>

        <div class="row">
            {% for status_list in status %}
                {% if status_list.status_task == "Заявка отправлена" %}
                    <a type="submit" class="col text-secondary">{{ status_list.status_task  }}</a>
                {% elif status_list.status_task == "Заявка прочитана" %}
                    <a type="submit" class="col text-primary">{{ status_list.status_task  }}</a>
                {% elif status_list.status_task == "Исполнитель назначен" %}
                    <a type="submit" class="col text-warning">{{ status_list.status_task  }}</a>
                {% elif status_list.status_task == "Заявка выполнена" %}
                    <a type="submit" class="col text-success">{{ status_list.status_task  }}</a>
                {% else %}
                    <a type="submit" class="col text-danger">{{ status_list.status_task  }}</a>
                {% endif %}
            {% endfor %}
        </div>
</div>
<br>

    {% if tasks %}
        
        <h3>Количество заявок, поданных вами: {{ tasks|length}}</h3>
        {% for el in page_obj %}
            
            {# Each "contact" is a Contact model object. #}
            {{ el.full_name|upper }}
                {% if el.status_task == "Заявка отправлена" %}  
                    <div class="alert alert-secondary mt-2">
                {% elif el.status_task == "Заявка прочитана" %}
                    <div class="alert alert-primary mt-2">
                {% elif el.status_task == "Исполнитель назначен" %}
                    <div class="alert alert-warning mt-2">
                {% elif el.status_task == "Заявка выполнена" %}
                    <div class="alert alert-success mt-2">
                {% else %}
                    <div class="alert alert-danger mt-2">
                {% endif %}
                
                        <div class="row">
                            <h4 class="col-sm col-md-8"> Статус заявки: <strong>{{ el.status_task }}</strong> </h4>
                            {% comment %} <h4 class="col-sm col-md-4"> Ваше имя: <strong>{{ el.author }}</strong> </h4> {% endcomment %}
                            {% if el.contractor is not None %}
                                <h5 class="col-sm col-md-4">Вашу заявку выполнит: {{ el.contractor }}</h5>
                            {% endif %}
                        </div>
                        <br>
                        <div class="row">
                            <h5 class="col-sm"> Хост-нейм вашего компьютера: <strong>{{ el.host_name }}</strong></h5> 
                            {% comment %} <h5 class="col-sm col-md-4">Ваш отдел в организации: <strong>{{ el.dept }}</strong> </h5> {% endcomment %}
                        </div>
                        <h3 class=""> Название заявки: <strong>{{ el.title }}</strong> </h3> <br>
                        <hr>
                        <p class="text-break" > Описание задачи: <br><strong>{{ el.task|safe }}</strong> </p>
                        <hr>
                        <p>Время подачи заявки: {{ el.create_date}}</p>
                        <p></p>    
                    </div>
                
        
        {% endfor %}

    

<div class="pagination">
    <span class="step-links">
        {% comment %} {% if page_obj.number == 1 %}
            <a>Это первая страница</a>
            <br>
        {% elif page_obj.number == page_obj.paginator.num_pages%}
            <a> Это последняя страница </a>
            <br>
        {% endif %} {% endcomment %}
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; На первую страницу</a>
            <a> | </a>
            <a href="?page={{ page_obj.previous_page_number }}"> Предыдущая страница</a>
        {% endif %}

        <span class="current">  Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}.  </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Следующая страница</a>
            <a> | </a>
            <a href="?page={{ page_obj.paginator.num_pages }}">На последнюю страницу &raquo;</a>
        {% endif %}
    </span>
</div>


        
    {% else %}
        <p> Записи осутствуют </p>
    {% endif %}

<nav aria-label="Page navigation">
  <ul class="pagination">
    <li class="page-item">
      <a class="page-link" href="?page=1" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only">Previous</span>
      </a>
    </li>
    {% for pg in page_obj.paginator.page_range %}
        {% if page_obj.number == pg %}
            <li class="page-item active" ><a class="page-link">{{ pg }}</a></li>    
        {% elif pg >= page_obj.number|add:-2 and pg <= page_obj.number|add:2 %}
        <li class="page-item" ><a class="page-link" href="?page={{ pg }}">{{ pg }}</a></li>
        {% endif %}
    {% endfor %}
      <a class="page-link"  href="?page={{ page_obj.paginator.num_pages }}" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only"  >Next</span>
      </a>
    </li>
  </ul>
</nav> 
